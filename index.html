<!DOCTYPE html>
<html><head><meta charset="utf-8"><title>trifl - trifling functional views</title><link rel="stylesheet" href="css/base.css"><link rel="stylesheet" href="css/prism.css"><link rel="stylesheet" href="css/styles.css"></head><body><div class="top"><div class="container"><h1>trifl</h1><p>a functional web client user interface library with a unidirectional dataflow and a virtual dom.</p></div></div><div class="main"><div class="container"><div class="docblock"><figure><img src="assets/trifl-flow.svg"><figcaption>figure detailing the flow of a trifl application.</figcaption></figure><h2>three parts</h2><p>There are three parts to trifl:<ul><li><i>Actions</i> are helper functions to aid decoupling of application parts in a unidirectional manner.</li><li><i>Views</i> are render functions whose purpose are to make dom nodes reflect some model state.</li><li>The <i>router</i> is a utility for organising a url space into visible views and firing actions as a result of url changes.</li></ul></p><h2>actions</h2><p>Actions can be thought of as really bad events cause they can only have one listener: the handler. Other frameworks talk about "dispatcher" as a component, and whilst trifl doesn't have such an component, we encourage to think of action handlers as dispatcher code.</p><p>Actions are triggered by input in the user interface or asynchronous server events such as updates and responses to ajax.</p></div><div class="compare"><div class="col col-6 mobile-full"><p>Declare a handler</p><pre><code class="language-coffeescript">handler "selectarticle", (articleid) ->
    model.articles.requestArticle(articleid)

</code></pre><p>Trigger an action</p><pre><code class="language-coffeescript">action "selectarticle", "slugattack01"</code></pre></div><div class="col col-6 mobile-full"><p>Declare a handler</p><pre><code class="language-javascript">handler("selectarticle", function(articleid) {
    model.articles.requestArticle(articleid);
});</code></pre><p>Trigger an action</p><pre><code class="language-javascript">action("selectarticle", "slugattack01");</code></pre></div></div><div class="docblock"><p>Only one action can be triggered at a time. It is an error to dispatch another somewhere inside the handler (or model code) and doing so will result in an exception.</p><p>There is however another class of actions called updates which are allowed. Updates are used to signal that a model has been updated and requires re-rendering in the views.</p><h3>dispatchers and controllers</h3><p>Handlers come in two variants that work exactly the same, but are mentally separated to know what part of the code they are in.</p><ul><li>action – <i>dispatcher function</i> (handler)</li><li>update – <i>controller function</i> (handler)</li></ul><p>Dispatchers are handlers that receive plain actions. Controllers work on the back of models marked as updated during the dispatch of an action.</p><figure><img src="assets/trifl-action2view.svg"><figcaption>figure showing action → module updates → view updates.</figcaption></figure></div></div></div><script src="js/prism.js"></script><div class="footer"><div class="container"><p class="copyright">Copyright © 2015 Martin Algesten</p></div></div></body></html>